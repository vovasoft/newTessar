<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8" />
    <title>Metronic | Visual Charts</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/metro.css" rel="stylesheet" />
    <link href="assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="assets/css/style.css" rel="stylesheet" />
    <link href="assets/css/style_responsive.css" rel="stylesheet" />
    <link href="assets/css/style_default.css" rel="stylesheet" id="style_color" />
    <link rel="stylesheet" type="text/css" href="assets/uniform/css/uniform.default.css" />
    <link rel="stylesheet" href="assets/bootstrap-datepicker/css/datepicker.css">
    <link rel="stylesheet" href="assets/css/jquery.pagination.css"/>
    <link rel="shortcut icon" href="favicon.ico" />
    <style>
        .selfbox {
            background-color: #eee;
            margin-bottom: 20px;
            box-sizing: border-box;
            border-radius: 4px;
            position: relative;
        }

        .table th, td {
            text-align: center !important;
        }
        .keyword_ml{
            margin-left: 0 !important;
        }
    </style>
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->

<body class="fixed-top">
<div id="app">
    <!-- BEGIN HEADER -->
    <div class="header navbar navbar-inverse navbar-fixed-top">
        <!-- BEGIN TOP NAVIGATION BAR -->
        <div class="navbar-inner">
            <div class="container-fluid">
                <!-- BEGIN LOGO -->
                <a class="brand" href="index.html">
                    <img src="assets/img/logo.png" alt="logo" />
                </a>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
                    <img src="assets/img/menu-toggler.png" alt="" />
                </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                <ul class="nav pull-right">
                    <!-- BEGIN USER LOGIN DROPDOWN -->
                    <li class="dropdown user">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img alt="" src="assets/img/avatar1_small.jpg" />
                            <span class="username">Bob Nilson</span>
                            <i class="icon-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="Javascript:void(0);">
                                    <i class="icon-user"></i> My Profile</a>
                            </li>

                            <li>
                                <a href="login.html">
                                    <i class="icon-key"></i> Log Out</a>
                            </li>
                        </ul>
                    </li>
                    <!-- END USER LOGIN DROPDOWN -->
                </ul>
                <!-- END TOP NAVIGATION MENU -->
            </div>
        </div>
        <!-- END TOP NAVIGATION BAR -->
    </div>
    <!-- END HEADER -->
    <!-- BEGIN CONTAINER -->
    <div class="page-container row-fluid">
        <!-- BEGIN SIDEBAR -->
        <div class="page-sidebar nav-collapse collapse">
            <!-- BEGIN SIDEBAR MENU -->
            <ul>
                <li>
                    <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                    <div class="sidebar-toggler hidden-phone"></div>
                    <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                </li>
                <li class="start">
                    <a href="overview.html">
                        <i class="icon-home"></i>
                        <span class="title">概览</span>
                    </a>
                </li>
                <li class="has-sub">
                    <a href="javascript:;">
                        <i class="icon-bookmark-empty"></i>
                        <span class="title">活跃分析</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li class="active">
                            <a href="active.html">活跃</a>
                        </li>
                        <li>
                            <a href="frequency.html">使用频率</a>
                        </li>
                    </ul>
                </li>
                <li class="">
                    <a href="">
                        <i class="icon-bar-chart"></i>
                        <span class="title">转化分析</span>
                        <span class="selected"></span>
                    </a>
                </li>
                <li class="">
                    <a href="stay.html">
                        <i class="icon-calendar"></i>
                        <span class="title">留存分析</span>
                    </a>
                </li>
                <li class="">
                    <a href="pay.html">
                        <i class="icon-camera"></i>
                        <span class="title">付费分析</span>
                    </a>
                </li>
                <li class="has-sub active">
                    <a href="generate_channel.html">
                        <i class="icon-credit-card"></i>
                        <span class="selected"></span>
                        <span class="title">生成渠道</span>
                        <span class="arrow open"></span>
                    </a>
                    <ul class="sub">
                        <li class="active">
                            <a href="channel_list.html">渠道列表</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <!-- END SIDEBAR MENU -->
        </div>
        <!-- END SIDEBAR -->
        <!-- BEGIN PAGE -->
        <div class="page-content">

            <!-- BEGIN PAGE CONTAINER-->
            <div class="container-fluid">
                <!-- BEGIN PAGE HEADER-->
                <div class="row-fluid">
                    <div class="span12">
                        <!-- BEGIN STYLE CUSTOMIZER -->
                        <div class="color-panel hidden-phone">
                            <div class="color-mode-icons icon-color"></div>
                            <div class="color-mode-icons icon-color-close"></div>
                            <div class="color-mode">
                                <p>THEME COLOR</p>
                                <ul class="inline">
                                    <li class="color-black current color-default" data-style="default"></li>
                                    <li class="color-blue" data-style="blue"></li>
                                    <li class="color-brown" data-style="brown"></li>
                                    <li class="color-purple" data-style="purple"></li>
                                    <li class="color-white color-light" data-style="light"></li>
                                </ul>
                                <label class="hidden-phone">
                                    <input type="checkbox" class="header" checked value="" />
                                    <span class="color-mode-label">Fixed Header</span>
                                </label>
                            </div>
                        </div>
                        <!-- END BEGIN STYLE CUSTOMIZER -->
                        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                        <h3 class="page-title">
                            Channel List
                        </h3>
                        <ul class="breadcrumb">
                            <li>
                                <i class="icon-credit-card"></i>
                                <a href="javascript:void (0);">渠道列表</a>
                            </li>
                        </ul>
                        <!-- END PAGE TITLE & BREADCRUMB-->
                    </div>
                </div>
                <!-- END PAGE HEADER-->
                <div class="row-fluid selfbox">
                    <div class="span12 clearfix" style="background-color: #fff;">
                        <div class="tab-pane active" id="tab_1">
                            <div class="portlet box blue" style="margin-bottom: 0;">
                                <div class="portlet-title">
                                    <h4><i class="icon-reorder"></i>生成渠道ID</h4>
                                </div>
                                <div class="portlet-body">
                                    <div class="control-group pull-left">
                                        <div class="controls">
                                            <input type="text" name="sousuo" placeholder="搜索" id="serachBtn"/>
                                        </div>
                                    </div>
                                    <div class="control-group pull-left" style="margin-left: 30px;">
                                        <div class="controls">
                                            <input type="text" name="datefilter" placeholder="创建时间(不限)" id="timeBtn"/>
                                        </div>
                                    </div>

                                    <div class="btn blue pull-left"
                                         id="submitActive"
                                         @click="searchSubmit"
                                         style="margin-left: 20px">
                                        搜索
                                    </div>
                                    <!--table 列表开始-->
                                    <table class="table table-striped table-bordered table-hover" id="sample_1">
                                        <thead>
                                            <tr>
                                                <!--<th style="width:8px;"><input type="checkbox" class="group-checkable"-->
                                                                              <!--data-set="#sample_1 .checkboxes"/></th>-->
                                                <th>编号</th>
                                                <th>游戏</th>
                                                <th class="hidden-480">入口类型</th>
                                                <th class="hidden-480">入口定义</th>
                                                <th class="hidden-480">主渠道</th>
                                                <th class="hidden-480 urlChoose">渠道链接</th>
                                                <th class="hidden-480">创建人</th>
                                                <th class="hidden-480">创建时间</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                    <tr class="odd gradeX" v-for="(item,index) in pageForNumber">
                                        <td>{{ item.id }}</td>
                                        <td>{{item.game}}</td>
                                        <td class="hidden-480">{{ item.entry }}</td>
                                        <td class="hidden-480">{{ item.define }}</td>
                                        <td class="hidden-480">{{ item.mainChannel }}</td>
                                        <td class="hidden-480 urlChoose">{{ item.url }}</td>
                                        <td class="hidden-480">{{ item.creator }}</td>
                                        <td class="hidden-480">{{ item.createTime }}</td>
                                    </tr>
                                        </tbody>

                                    </table>
                                    <div id="page" class="m-pagination"></div>
                                    <div id="eventLog"></div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane active" id="tab_2" style="margin-top: 25px; display: none;">
                            <div class="portlet box blue" style="margin-bottom: 0;">
                                <div class="portlet-title">
                                    <h4><i class="icon-reorder"></i>生成入口链接</h4>
                                </div>
                                <div class="portlet-body form">
                                    <!-- BEGIN FORM-->
                                    <form action="#" class="">
                                        <div class="row-fluid ">
                                            <div class="span6 ">
                                                <div class="control-group">
                                                    <label class="control-label" >游戏</label>
                                                    <div class="controls">
                                                        <select  class="m-wrap span12"
                                                                 tabindex="1"
                                                                 @change="gameSelect(gameSelected)"
                                                                 v-model="gameSelected">
                                                            <option v-for="(item,index) in generateUrlList"
                                                                    :value="item.value">
                                                                {{item.value}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row-fluid">
                                            <div class="span12">
                                                <div class="control-group">
                                                    <span>URL:</span>
                                                    <span v-show="generateUrlCount==0">{{generateUrlList[0].url}}+{{generateKeyword}}</span>
                                                    <span v-show="generateUrlCount==1">{{generateUrlList[1].url}}+{{generateKeyword}}</span>
                                                    <span v-show="generateUrlCount==2">{{generateUrlList[2].url}}+{{generateKeyword}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!--/row-->
                                    </form>
                                    <!-- END FORM-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- BEGIN PAGE CONTAINER-->
        </div>
        <!-- END PAGE -->

        <!--成功弹出-->
        <div class="modal hide fade" id="myModal">
            <div class="modal-header">
                <button  class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h3>Tip</h3>
            </div>
            <div class="modal-body">
                <!--成功显示-->
                <div class="modal_success"
                     v-if="status">
                    <div class="mb_content_t">
                        <span>渠道连接</span>
                        <i>copy</i>
                        <div class="mb_lianjie_c">
                            <p>1.&nbsp;&nbsp;&nbsp; http://www.faskfjskl.fakljfkljfe.aslkjfksjf.com</p>
                            <p>2.&nbsp;&nbsp;&nbsp; http://www.faskfjskl.fakljfkljfe.aslkjfksjf.com</p>
                        </div>
                    </div>
                    <hr>
                    <div class="mb_content_b"
                         v-if="shortLinkStatus">
                        <span>短连接</span>
                        <i>copy</i>
                        <div class="mb_lianjie_d">
                            <p>1.&nbsp;&nbsp;&nbsp; http://www.faskfjskl.fakljfkljfe.aslkjfksjf.com</p>
                            <p>2.&nbsp;&nbsp;&nbsp; http://www.faskfjskl.fakljfkljfe.aslkjfksjf.com</p>
                        </div>
                    </div>
                </div>
                <!--失败显示-->
                <div class="modal_faile"
                     v-else>
                    <div class="mb_content">
                        该渠道ID已存在,请尝试更换关键词!
                    </div>
                </div>

            </div>
            <div class="modal-footer" style="text-align: center;">
                <button class="btn blue"  data-dismiss="modal" aria-hidden="true">关闭</button>
            </div>
        </div>

    </div>
    <!-- END CONTAINER -->
    <!-- BEGIN FOOTER -->
    <div class="footer">
        2017 &copy; XCLOUDGAME
        <div class="span pull-right">
                <span class="go-top">
                    <i class="icon-angle-up"></i>
                </span>
        </div>
    </div>
    <!-- END FOOTER -->
    <!-- BEGIN JAVASCRIPTS -->
</div>
<style>
    .table-condensed .prev:hover,
    .table-condensed .datepicker-switch:hover,
    .table-condensed .next:hover{
        cursor: pointer !important;
    }

    /*#sample_1 .urlChoose{*/
        /*width: 450px !important;*/
        /*text-overflow: ellipsis;*/
        /*white-space: nowrap;*/
        /*overflow: hidden;*/
    /*}*/
</style>
<!-- Load javascripts at bottom, this will reduce page load time -->
<script src="assets/js/vue-2.2.0.js"></script>
<script src="assets/js/jquery-1.8.3.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.blockui.js"></script>
<script src="assets/js/jquery.cookie.js"></script>
<script src="assets/echarts/echarts.common.min.js"></script>
<script src="assets/breakpoints/breakpoints.js"></script>
<!-- ie8 fixes -->
<!--[if lt IE 9]>
<script src="assets/js/excanvas.js"></script>
<script src="assets/js/respond.js"></script>
<![endif]-->
<script src="assets/bootstrap-daterangepicker-master/moment.min.js"></script>
<script src="assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<!--<script src="assets/bootstrap-daterangepicker/date.js"></script>-->

<!--<script type="text/javascript" src="assets/js/select2.min.js"></script>-->
<script type="text/javascript" src="assets/data-tables/jquery.dataTables.js"></script>
<script type="text/javascript" src="assets/data-tables/DT_bootstrap.js"></script>

<script src="assets/js/app.js"></script>

<script src="assets/js/jquery.pagination-1.2.7.js"></script>
<!--<script src="assets/js/table-managed.js"></script>-->


<script>

    // 1. 上传文件app.js,
    // 2. bootstrap-daterangepicker-master
    // 2. 所有页面
    jQuery(document).ready(function () {
        App.init();
        //TableManaged.init();

    });

    //第五种方法
    var idTmr;
    function  getExplorer() {
        var explorer = window.navigator.userAgent ;
        //ie
        if (explorer.indexOf("MSIE") >= 0) {
            return 'ie';
        }
        //firefox
        else if (explorer.indexOf("Firefox") >= 0) {
            return 'Firefox';
        }
        //Chrome
        else if(explorer.indexOf("Chrome") >= 0){
            return 'Chrome';
        }
        //Opera
        else if(explorer.indexOf("Opera") >= 0){
            return 'Opera';
        }
        //Safari
        else if(explorer.indexOf("Safari") >= 0){
            return 'Safari';
        }
    }
    function dldExcel(tableid) {
        if(getExplorer()=='ie')
        {
            var curTbl = document.getElementById(tableid);
            var oXL = new ActiveXObject("Excel.Application");
            var oWB = oXL.Workbooks.Add();
            var xlsheet = oWB.Worksheets(1);
            var sel = document.body.createTextRange();
            sel.moveToElementText(curTbl);
            sel.select();
            sel.execCommand("Copy");
            xlsheet.Paste("xiazai");
            oXL.Visible = true;

            try {
                var fname = oXL.Application.GetSaveAsFilename("Excel.xls", "Excel Spreadsheets (*.xls), *.xls");
            } catch (e) {
                print("Nested catch caught " + e);
            } finally {
                oWB.SaveAs(fname);
                oWB.Close(savechanges = false);
                oXL.Quit();
                oXL = null;
                idTmr = window.setInterval("Cleanup();", 1);
            }

        }
        else
        {
            tableToExcel(tableid,name,filename)
        }
    }
    function Cleanup() {
        window.clearInterval(idTmr);
        CollectGarbage();
    }
    var tableToExcel = (function() {
        var uri = 'data:application/vnd.ms-excel;base64,',
                template = '<html><head><meta charset="UTF-8"></head><body><table>{table}</table></body></html>',
                base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) },
                format = function(s, c) {
                    return s.replace(/{(\w+)}/g,
                            function(m, p) { return c[p]; })
                }
        return function(table, name, filename) {
            if (!table.nodeType) table = document.getElementById(table)
            var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
            link.download = filename;
            link.href = uri + base64(format(template, ctx));
            link.click();
        }
    })()
</script>
<!-- END JAVASCRIPTS -->

<script type="text/javascript">
    var vmActive = new Vue({
        el: "#app",
        data: {
            ajaxLock:false,
            status:false, // 点击提交时的判断
            shortLinkStatus:false, // 是否生成短连接 默认false
            channelIdUrl: "",
            shortUrl: "",
            generateUrlCount: 0,
            searchAjaxLock:false,
            pageForNumber: "",
            pageSize:10, // 默认显示多少页
            total:0,
            gameNameList:[
                {gn:"请选择 ---"},
                {gn:"生死狙击EN"},
                {gn:"生死狙击PT"},
                {gn:"火影"},
                {gn:"龙珠"},
                {gn:"死神"},
                {gn:"魔力学堂"},
                {gn:"ZULA"},
            ],
            entryTypeList:[
                {et:"请选择 ---"},
                {et:"Facebook APP"},
                {et:"Landing Page"},
            ],
            generateUrl:"https://www.xcloudgame.com?a=",
            gameSelected:"longzhu",
            generateUrlList:[
                {url:"https://www.xcloudgamelz.com?a=",value:"longzhu"},
                {url:"https://www.xcloudgamebloodstrike.com?a=",value:"bloodstrike"},
                {url:"https://www.xcloudgamebleach.com?a=",value:"bleach"},
            ],
            generateKeyword: "keyword"
        },
        mounted() {
            this.TsDateInit(); // 初始化时间挂载
            this.TsSelectInit();
            this.Tspage(); // 初始化分页
            // this.submitActive(); //点击获取数据
        },

        methods: {
            // 初始化时间
            TsDateInit: function () {
                $('.table-condensed .prev,.table-condenseddatepicker-switch,.table-condensed .next').css({

                })
                $('input[name="datefilter"]').datepicker({
                    autoclose: true
                });
                $('input[name="datefilter"]').val("创建时间(不限)");

//                $('.fixed-top').click(function (event) {
//                    event.stopPropagation;$('input[name="datefilter"]').val("创建时间(不限)");
//                })
            },

            // 初始化select选框和入口链接
            TsSelectInit: function () {
                var _this = this;
                $.ajax({
                    type: 'get',
                    url: 'http://192.168.10.102:9898/app/getCGS',
                    dataType: 'jsonp',
                    jsonp: 'callback',
                    async: true,
                    success: function (res) {
                        console.log(res);
                        _this.selectDataList = res;
                        console.log(_this.selectDataList.cNames[0]);
                        _this.$nextTick(function () {
                            console.log($("#channelVal").find("option:selected").text());
                        });
                        //_this.TsEchartTableInit(); // 初始化图表和表格挂载
                    },
                    error: function () {

                    }
                });
                console.log(_this.selectDataList);
            },

            //初始化分页
            Tspage: function () {
                $.ajax({
                    type: 'get',
                    url: 'http://192.168.10.102:9898/channel/getChannelData',
                    dataType:"jsonp",
                    //传递给请求处理程序，用以获得jsonp回调函数名的参数名(默认为:callback)
                    jsonp: "callback",
                    //自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名
                    //jsonpCallback:"jsonpCallback_success",
                    data: {
                        count:10,
                        page:1
                    },
                    success: function (data) {
                        if(data.code == 200){
                            console.log(data);
                            console.log(data.data.list);
                            console.log(data.data.count);
                            vmActive.pageForNumber = data.data.list;
                            vmActive.total = data.data.count;
                            $("#page").page({
                                debug: true,
                                showInfo: true,
                                showJump: true,
                                showPageSizes: true,
                                pageSize: 3,
                                pageSizeItems:[10,20,50],
                                total:vmActive.total
                            });
                        }

                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        console.log("error");
                    }

                });


                $("#page").on("pageClicked", function (event, pageIndex) {
                    // 按钮加上下页点击
                    $.ajax({
                        type: 'get',
                        url: 'http://192.168.10.102:9898/channel/getChannelData',
                        dataType:"jsonp",
                        //传递给请求处理程序，用以获得jsonp回调函数名的参数名(默认为:callback)
                        jsonp: "callback",
                        //自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名
                        //jsonpCallback:"jsonpCallback_success",
                        data: {
                            count:vmActive.pageSize,
                            page:pageIndex+1
                        },
                        success: function (data) {
                            if(data.code == 200){
                                console.log((data));
                                console.log((data.data.list));
                                vmActive.pageForNumber = data.data.list;
                            }

                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            console.log("error");
                        }

                    });

                });
                $("#page").on('jumpClicked', function (event, pageIndex) {
                    // go点击
                    $.ajax({
                        type: 'get',
                        url: 'http://192.168.10.102:9898/channel/getChannelData',
                        dataType:"jsonp",
                        //传递给请求处理程序，用以获得jsonp回调函数名的参数名(默认为:callback)
                        jsonp: "callback",
                        //自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名
                        //jsonpCallback:"jsonpCallback_success",
                        data: {
                            count:3,
                            page:pageIndex+1
                        },
                        success: function (data) {
                            console.log(data);
                            vmActive.pageForNumber = data.data.list;
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            console.log("error");
                        }

                    });

                });
                $("#page").on('pageSizeChanged', function (event, pageSize) {
                    // 每页多少条数据点击
                    // 点击发送ajax(),告诉后台每次返回多少条, pageSize
                    vmActive.pageSize = pageSize;
                    $.ajax({
                        type: 'get',
                        url: 'http://192.168.10.102:9898/channel/getChannelData',
                        dataType:"jsonp",
                        //传递给请求处理程序，用以获得jsonp回调函数名的参数名(默认为:callback)
                        jsonp: "callback",
                        //自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名
                        //jsonpCallback:"jsonpCallback_success",
                        data: {
                            count:pageSize,
                            page:1,
                        },
                        success: function (data) {
                            if(data.code == 200){
                                console.log(data);
                                console.log(data.data.list);
                                vmActive.pageForNumber = data.data.list;
                                //$("#page").page('destroy' );
                                $("#page").page({
                                    debug: true,
                                    showInfo: true,
                                    showJump: true,
                                    showPageSizes: true,
                                    pageSizeItems:[10,20,50],
                                    total:20,
                                    pageSize:vmActive.pageSize
                                });
                            }

                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            console.log("error");
                        }

                    });
                });

            },

            // 点击搜索按钮提交
            searchSubmit: function () {

                //http://localhost:9898/channel/findoutChannelData?key=app&time=时间
                let searchDateVal = $('input[name="datefilter"]').val().trim();
                let searchKewVal = $('input[name="sousuo"]').val().trim();
                if(searchDateVal=="创建时间(不限)"){
                    searchDateVal="";
                }
                console.log(searchKewVal);
                console.log(searchDateVal);
                if(searchDateVal){
                    this.searchAjaxLock=true;
                }else{
                    this.searchAjaxLock=false;
                }
                if(this.searchAjaxLock){
                    $.ajax({
                        type: 'get',
                        url: 'http://192.168.10.102:9898/channel/findoutChannelData',
                        dataType:"jsonp",
                        //传递给请求处理程序，用以获得jsonp回调函数名的参数名(默认为:callback)
                        jsonp: "callback",
                        //自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名
                        //jsonpCallback:"jsonpCallback_success",
                        data: {
                            key:searchKewVal,
                            time:searchDateVal,
                            count: 10,// 每页有多少个数据
                            page: 1,// 每页有多少个数据
                        },
                        success: function (data) {
                            // 需要返回 总条数
                            console.log(data);
                            console.log(data.code);
                            if(data.code == 200){
                                vmActive.pageForNumber = data.data.list;
                                vmActive.total = data.data.count;
                                // 销毁从新配置
                                $("#page").page('destroy');
                                //console.log($("#page").page())
                                $("#page").page({
                                    debug: true,
                                    showInfo: true,
                                    showJump: true,
                                    showPageSizes: true,
                                    pageSizeItems:[10,20,50],
                                    total:data.data.count,
                                    pageSize:vmActive.pageSize
                                });
                            }else if(data.code == 302){
                                vmActive.pageForNumber = "";
                                $("#page").page('destroy');
                            }


                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            console.log("error");
                        }

                    });
                }

            },



        }
    });
</script>
</body>
<!-- END BODY -->

</html>